# io-lollipop

## 1.13.1 

- Track an event every time`ResponseErrorForbiddenNotAuthorized`is raised [`#56`](https://github.com/pagopa/io-functions-lollipop/pull/56)
- track event in case of non valid document [`4708849`](https://github.com/pagopa/io-functions-lollipop/commit/4708849980a1d9755b2935e368ce6f74aeb190d7)

## 1.13.0 

> 29 October 2024

## 1.13.0-RELEASE

> 29 October 2024

- build(deps): bump xmldom version to "0.8.10" [`#55`](https://github.com/pagopa/io-functions-lollipop/pull/55)
- Bump handlebars from 4.5.3 to 4.7.7 [`#47`](https://github.com/pagopa/io-functions-lollipop/pull/47)
- Bump jose from 4.13.0 to 4.15.5 [`#48`](https://github.com/pagopa/io-functions-lollipop/pull/48)
- Bump express from 4.18.2 to 4.20.0 [`#54`](https://github.com/pagopa/io-functions-lollipop/pull/54)
- [#IOPID-2200] updated codeowners [`#52`](https://github.com/pagopa/io-functions-lollipop/pull/52)
- [#IOPID-1963] update pipeline to deploy to new function [`#50`](https://github.com/pagopa/io-functions-lollipop/pull/50)
- Bump version to 1.13.0 [skip ci] [`27065f9`](https://github.com/pagopa/io-functions-lollipop/commit/27065f9c1b3a0815b52642a8a0e87c810f1b71a3)

## 1.12.1 

> 7 March 2024

## 1.12.1-RELEASE

> 7 March 2024

- [#IOPID-1643] Fix ReDOS vulnerability on Lollipop SignatureInput param [`#45`](https://github.com/pagopa/io-functions-lollipop/pull/45)
- Bump version to 1.12.1 [skip ci] [`724c3ba`](https://github.com/pagopa/io-functions-lollipop/commit/724c3ba79d272d4e2555dbc2a8e1657bec9f84ce)
- [#IOPID-1643] Fix ReDOS vulnerability on Lollipop SignatureInput parameter [`ceda9c0`](https://github.com/pagopa/io-functions-lollipop/commit/ceda9c0b08d3f3cfab4928a8b0b51a3bf382bf7f)

## 1.12.0 

> 18 July 2023

## 1.12.0-RELEASE

> 18 July 2023

- [#IOPID-433] The Keyid in signature-params has a thumbprint [`#43`](https://github.com/pagopa/io-functions-lollipop/pull/43)
- fix tests by generating a key-pair and sign the request [`0444bee`](https://github.com/pagopa/io-functions-lollipop/commit/0444bee75df14c92c1095b73f00ed2f6168a7c35)
- small refactor [`72f0e73`](https://github.com/pagopa/io-functions-lollipop/commit/72f0e73dbd1780fecb8679488b094a57f44393fc)
- Calculate the thumbprint splitting the assertionRef prefix [`490cccf`](https://github.com/pagopa/io-functions-lollipop/commit/490cccf2eb6c5f1d6c1720190e6f529cff17accd)

## 1.11.1 

> 22 June 2023

## 1.11.1-RELEASE

> 22 June 2023

- fix: Add jwt log [`#42`](https://github.com/pagopa/io-functions-lollipop/pull/42)
- pass function name to middleware [`49045ce`](https://github.com/pagopa/io-functions-lollipop/commit/49045ce808648064abab056310dc8829bd0375c8)
- fix server url [`9bc1d0f`](https://github.com/pagopa/io-functions-lollipop/commit/9bc1d0f737435037356726272dff84dbd39cc991)
- Bump version to 1.11.1 [skip ci] [`bac0215`](https://github.com/pagopa/io-functions-lollipop/commit/bac0215d996bb7a7ffaf2e95ee05eb22482fff1c)

## 1.11.0 

> 3 May 2023

## 1.11.0-RELEASE

> 3 May 2023

- [#IOPID-106] add `assertionRef` to exception, enable sampling [`#41`](https://github.com/pagopa/io-functions-lollipop/pull/41)
- [#IOPID-106] add assertionRef to exception, enable sampling [`aa4c051`](https://github.com/pagopa/io-functions-lollipop/commit/aa4c051685a85c33e9b9ce77ced0a30fbd506029)
- Bump version to 1.11.0 [skip ci] [`928a21a`](https://github.com/pagopa/io-functions-lollipop/commit/928a21a5f6d7a07e975b580d957663b2b568ae39)

## 1.10.2 

> 19 April 2023

## 1.10.2-RELEASE

> 19 April 2023

- [#IOPID-148] update LC middleware with multiple encoding verification [`#38`](https://github.com/pagopa/io-functions-lollipop/pull/38)
- [#IOPID-148] refactor common params [`f818ec3`](https://github.com/pagopa/io-functions-lollipop/commit/f818ec39c1a345b8fd8fb42b6920bc16973f8114)
- Bump version to 1.10.2 [skip ci] [`957d2b4`](https://github.com/pagopa/io-functions-lollipop/commit/957d2b48dd377adccbc74c1553a702b495958568)

## 1.10.1 

> 17 April 2023

## 1.10.1-RELEASE

> 17 April 2023

- [#IOPID-146] Remove duplicated events [`#36`](https://github.com/pagopa/io-functions-lollipop/pull/36)
- [#iocit-378] Remove duplicated events [`a5028d5`](https://github.com/pagopa/io-functions-lollipop/commit/a5028d5ab7d4306d6e7adc07372b0ef761f5a8ca)
- [#iocit-378] add failing test [`21dbae9`](https://github.com/pagopa/io-functions-lollipop/commit/21dbae9034cb6b392bfe61884c10cad3fc66db10)
- [#iocit-378] fix based on comments [`a14d8d7`](https://github.com/pagopa/io-functions-lollipop/commit/a14d8d78391a5f98b6d525db50d3b2db0e393a74)

## 1.10.0 

> 14 April 2023

## 1.10.0-RELEASE

> 14 April 2023

- [#IOPID-106] Add retry info to `HandlePubKeyRevoke` exception [`#37`](https://github.com/pagopa/io-functions-lollipop/pull/37)
- [#IOPID-106] add retryCount/maxRetryCount + always disable sampling [`a653171`](https://github.com/pagopa/io-functions-lollipop/commit/a653171a3f3549150e27d41e842f4353d37c9af3)
- Bump version to 1.10.0 [skip ci] [`a2740ce`](https://github.com/pagopa/io-functions-lollipop/commit/a2740ce5dd3057625d14a190d738e014e8bac466)
- [#IOPID-106] fix property sorting [`21a7159`](https://github.com/pagopa/io-functions-lollipop/commit/21a71591e53b5c92d31933e725e786c329bf146d)

## 1.9.0 

> 12 April 2023

## 1.9.0-RELEASE

> 12 April 2023

- [#IOCIT-378] Added error event tracking [`#33`](https://github.com/pagopa/io-functions-lollipop/pull/33)
- added event tracking [`130a578`](https://github.com/pagopa/io-functions-lollipop/commit/130a57805d3c8663f72ec7eb4d620249981801b7)
- added tests [`c36c9ec`](https://github.com/pagopa/io-functions-lollipop/commit/c36c9ecc4f9fb585c9caa241bd2b9e3d8481927e)
- fixed review [`db4f7b1`](https://github.com/pagopa/io-functions-lollipop/commit/db4f7b17d498f889a5bb1f574c9eb6f0f97a4bd4)

## 1.8.0 

> 12 April 2023

## 1.8.0-RELEASE

> 12 April 2023

- [#IOCIT-317]  Add custom events to `GenerateLCParams` [`#34`](https://github.com/pagopa/io-functions-lollipop/pull/34)
- [#IOPID-127] Use Crypto utils from fn-commons [`#35`](https://github.com/pagopa/io-functions-lollipop/pull/35)
- [#IOCIT-353]  Add opex dashboard for `external.yaml` openapi [`#32`](https://github.com/pagopa/io-functions-lollipop/pull/32)
- [#IOCIT-353] add opex terraform project [`c034548`](https://github.com/pagopa/io-functions-lollipop/commit/c034548fd76d45f5146828bb0f8b615e3649a435)
- [#IOCIT-317] update tests [`8757b6c`](https://github.com/pagopa/io-functions-lollipop/commit/8757b6c012f81d66489dbf1963ccf92655ff500a)
- [#IOCIT-317] move to new log implementation + add custom events [`8690cb7`](https://github.com/pagopa/io-functions-lollipop/commit/8690cb75e39fcca890fcd585679a525d120d27f5)

## 1.7.0 

> 24 March 2023

## 1.7.0-RELEASE

> 24 March 2023

- [#IOCIT-321] Add events to GetAssertion handler [`#31`](https://github.com/pagopa/io-functions-lollipop/pull/31)
- [#IOCIT-321] move to new log implementation [`9f643f6`](https://github.com/pagopa/io-functions-lollipop/commit/9f643f6a5205ef070195fdcf1056070e2bd05cbf)
- [#IOCIT-321] add events to GetAssertion handler [`b951320`](https://github.com/pagopa/io-functions-lollipop/commit/b95132016d25d93f3d7068172bd884180a3241de)
- add winston-ts logger  in getassertion fn [`d52701d`](https://github.com/pagopa/io-functions-lollipop/commit/d52701d8dc4395c24b816ff845bd2be12bbfc971)

## 1.6.0 

> 15 March 2023

## 1.6.0-RELEASE

> 15 March 2023

- [#IOCIT-373]  Add custom verifiers to signature middleware [`#30`](https://github.com/pagopa/io-functions-lollipop/pull/30)
- [#IOCIT-373] use custom verifiers in middleware [`9868378`](https://github.com/pagopa/io-functions-lollipop/commit/986837824ac9cb8c0735c1dee81da8d42bee75d3)
- [#IOCIT-373] fix import + tests [`51b9eec`](https://github.com/pagopa/io-functions-lollipop/commit/51b9eecef915ef09a1dcdac770d4fae5c44a1cfb)
- [#IOCIT-373] refactor based on comments [`b2a775e`](https://github.com/pagopa/io-functions-lollipop/commit/b2a775e13e7b0043b632e9ac979d2e16d58a6145)

## 1.5.1 

> 13 March 2023

## 1.5.1-RELEASE

> 13 March 2023

- [#IOCIT-372] Fix `content-digest` management [`#29`](https://github.com/pagopa/io-functions-lollipop/pull/29)
- fix middleware [`031df65`](https://github.com/pagopa/io-functions-lollipop/commit/031df65020af069127dfd3c38cddadb8448d5dfe)
- fix settings to enable debug [`776972e`](https://github.com/pagopa/io-functions-lollipop/commit/776972ef0ab2d72d331c4f8f91ba0774eab8fc88)
- Bump version to 1.5.1 [skip ci] [`e26b391`](https://github.com/pagopa/io-functions-lollipop/commit/e26b391fc15aa6b9e2dc3f8cd08e6bc517fcdf89)

## 1.5.0 

> 9 March 2023

## 1.5.0-RELEASE

> 9 March 2023

- [#IOCIT-368] Add first lollipop consumer endpoint [`#27`](https://github.com/pagopa/io-functions-lollipop/pull/27)
- Fix openapi external basepath [`#28`](https://github.com/pagopa/io-functions-lollipop/pull/28)
- comment out verify signature function [`53ea039`](https://github.com/pagopa/io-functions-lollipop/commit/53ea039bbfd6508046dca7a5f06c102a322db932)
- [#IOCIT-368] add tests [`85a5c62`](https://github.com/pagopa/io-functions-lollipop/commit/85a5c62bdf2d0c26a7c7650724abcd3ff90f79a0)
- add first lollipop consumer enpoint function [`8813f0b`](https://github.com/pagopa/io-functions-lollipop/commit/8813f0b9c07ca9423483c2d489b6e08aaf1268fd)

## 1.4.0 

> 6 March 2023

## 1.4.0-RELEASE

> 6 March 2023

- [#IOCIT-341] Implement GetAssertionHandler [`#26`](https://github.com/pagopa/io-functions-lollipop/pull/26)
- [#IOCIT-305] Expose generateLCParams endpoint [`#21`](https://github.com/pagopa/io-functions-lollipop/pull/21)
- [#IOCIT-340] Add jwt verify middleware [`#24`](https://github.com/pagopa/io-functions-lollipop/pull/24)
- [#IOCIT-301]  Add JWT management + key rotation management [`#14`](https://github.com/pagopa/io-functions-lollipop/pull/14)
- [#IOCIT-301] add tests [`abd806d`](https://github.com/pagopa/io-functions-lollipop/commit/abd806da37502cc4f01209329a46414f7e6e1443)
- [#IOCIT-341] add tests [`7613fb0`](https://github.com/pagopa/io-functions-lollipop/commit/7613fb0b3e96f3b92bd6ce55814a51050d845a87)
- init integration test for getAssertion [`ed8a69d`](https://github.com/pagopa/io-functions-lollipop/commit/ed8a69d5822d0eb897bd3c616d85892cb4e34909)

## 1.3.0 

> 28 February 2023

## 1.3.0-RELEASE

> 28 February 2023

- [#IOCIT-348] activatePubKey endpoint [`#13`](https://github.com/pagopa/io-functions-lollipop/pull/13)
- Align openapi specs [`#25`](https://github.com/pagopa/io-functions-lollipop/pull/25)
- Bump qs from 6.5.2 to 6.5.3 in /__integrations__ [`#10`](https://github.com/pagopa/io-functions-lollipop/pull/10)
- Bump http-cache-semantics from 4.1.0 to 4.1.1 [`#1`](https://github.com/pagopa/io-functions-lollipop/pull/1)
- Bump json5 from 2.2.0 to 2.2.3 in /__integrations__ [`#12`](https://github.com/pagopa/io-functions-lollipop/pull/12)
- internal openAPI fix [`#17`](https://github.com/pagopa/io-functions-lollipop/pull/17)
- [#IOCIT-301] Replace oval with swagger-cli in lint-api [`#15`](https://github.com/pagopa/io-functions-lollipop/pull/15)
- [#IOCIT-298] Add LolliPOPKeysModel [`#7`](https://github.com/pagopa/io-functions-lollipop/pull/7)
- [#IOCIT-357]  Add integration tests [`#9`](https://github.com/pagopa/io-functions-lollipop/pull/9)
- [#IOCIT-324]  add ping method [`#8`](https://github.com/pagopa/io-functions-lollipop/pull/8)
- [#IOCIT-324] removed info endpoint from internal spec [`#6`](https://github.com/pagopa/io-functions-lollipop/pull/6)
- [#IOCIT-309] Add `internal.yaml` spec [`#4`](https://github.com/pagopa/io-functions-lollipop/pull/4)
- Refactor over utility changes [`b68d5ef`](https://github.com/pagopa/io-functions-lollipop/commit/b68d5ef205e046eac0b8ae5e7125f2a7f5020c20)
- Add GetAssertion skeleton [`74768c6`](https://github.com/pagopa/io-functions-lollipop/commit/74768c62303fb938bba2631fd436a6abc52be6ae)
- remove unused util [`230a098`](https://github.com/pagopa/io-functions-lollipop/commit/230a098db0de40a9c0d37b9ebef847c8fab65049)

## 1.2.1 

> 15 February 2023

## 1.2.1-RELEASE

> 15 February 2023

- Bump version to 1.2.1 [skip ci] [`6c4b4cf`](https://github.com/pagopa/io-functions-lollipop/commit/6c4b4cfb3385778233f063052ac188458442680c)
- rename info enpoint path [`8673598`](https://github.com/pagopa/io-functions-lollipop/commit/867359858cf49b1d39a88f98e06dac7d3ba8be02)

## 1.2.0 

> 15 February 2023

## 1.2.0-RELEASE

> 15 February 2023

- fix config and enhance io-functions-commons ver [`93169f5`](https://github.com/pagopa/io-functions-lollipop/commit/93169f54f40790a9eba78731ab505931ad41eacc)
- Bump version to 1.2.0 [skip ci] [`fc2ac90`](https://github.com/pagopa/io-functions-lollipop/commit/fc2ac90d9a562a12c79225d565c1e50ab4356147)

## 1.1.0 

> 15 February 2023

## 1.1.0-RELEASE

> 15 February 2023

## 1.0.2 

> 24 February 2023

## 1.0.2-RELEASE

> 24 February 2023

- Bump qs from 6.5.2 to 6.5.3 in /__integrations__ [`#10`](https://github.com/pagopa/io-functions-lollipop/pull/10)
- Bump http-cache-semantics from 4.1.0 to 4.1.1 [`#1`](https://github.com/pagopa/io-functions-lollipop/pull/1)
- Bump json5 from 2.2.0 to 2.2.3 in /__integrations__ [`#12`](https://github.com/pagopa/io-functions-lollipop/pull/12)
- internal openAPI fix [`#17`](https://github.com/pagopa/io-functions-lollipop/pull/17)
- [#IOCIT-301] Replace oval with swagger-cli in lint-api [`#15`](https://github.com/pagopa/io-functions-lollipop/pull/15)
- [#IOCIT-298] Add LolliPOPKeysModel [`#7`](https://github.com/pagopa/io-functions-lollipop/pull/7)
- Bump version to 1.0.2 [skip ci] [`3a62823`](https://github.com/pagopa/io-functions-lollipop/commit/3a62823570425a14163d132ac61d1a2d45f36c0b)
- Merge pull request #20 from pagopa/IOCIT-328--add-pubkey-endpoint-to-reserve-keys [`806ece2`](https://github.com/pagopa/io-functions-lollipop/commit/806ece2cdf5b8db1da4cc91f7097d8c5cc5729e0)
- remove azurite custom docker builder [`ec7a626`](https://github.com/pagopa/io-functions-lollipop/commit/ec7a62697dd2a03e2ea2f0574033a853be811b30)

## 1.0.1 

> 17 February 2023

#### v1.0.1-RELEASE

> 17 February 2023

- [#IOCIT-357]  Add integration tests [`#9`](https://github.com/pagopa/io-functions-lollipop/pull/9)
- [#IOCIT-324]  add ping method [`#8`](https://github.com/pagopa/io-functions-lollipop/pull/8)
- [#IOCIT-324] removed info endpoint from internal spec [`#6`](https://github.com/pagopa/io-functions-lollipop/pull/6)
- [#IOCIT-309] Add `internal.yaml` spec [`#4`](https://github.com/pagopa/io-functions-lollipop/pull/4)
- Initial commit [`966d5e5`](https://github.com/pagopa/io-functions-lollipop/commit/966d5e54edb3db84e4f2a5bf01abaaffb82a5475)
- [#IOCIT-357] IT added [`dc4ad03`](https://github.com/pagopa/io-functions-lollipop/commit/dc4ad0373b6613725ac3861e0fd66291f1ebe6f5)
- [#IOCIT-309] add internal-.yaml spec [`b22b888`](https://github.com/pagopa/io-functions-lollipop/commit/b22b8886fa338920f9db574d82f3c10a3eedc54d)
